(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"1cRO":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var o=r("AytR"),n=r("fXoL"),i=r("tk/3");let c=(()=>{class e{constructor(e){this.http=e}logInfo(e){return this.http.post(o.a.apiUrlInternal+"uiloginfo",JSON.stringify({error:"Info",message:"UI - "+e}))}logError(e,t){return this.http.post(o.a.apiUrlInternal+"uiloginfo",JSON.stringify({error:e,message:"UI - "+t}))}logErrorInOpenBasket(e,t,r){return this.http.post(o.a.apiUrlInternal+`logerror/${e}/${t}`,JSON.stringify({error:"Payment",message:r}))}}return e.\u0275fac=function(t){return new(t||e)(n.ec(i.b))},e.\u0275prov=n.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"u/Ox":function(e,t,r){"use strict";r.r(t),r.d(t,"ProcessPaymentModule",(function(){return C}));var o,n,i,c,s=r("ofXK"),a=r("tyNb"),d=r("3st6"),b=r("pCEw"),m=r("YXjc"),l=r("zx3v"),u=r("fFWf"),g=r("1cRO"),p=r("fXoL");function h(e,t){1&e&&(p.Ub(0,"div"),p.Ub(1,"h1"),p.Yb(2,n),p.Tb(),p.Ub(3,"p"),p.Yb(4,i),p.Tb(),p.Tb())}function f(e,t){1&e&&(p.Ub(0,"div"),p.Ub(1,"h1"),p.Yb(2,c),p.Tb(),p.Tb())}o="VEUILLEZ NE PAS ACTUALISER VOTRE PAGE NI CLIQUER SUR LE BOUTON \"RETOUR\" DU NAVIGATEUR.",n="\n          Un instant s'il vous pla\xEEt\n        ",i="\n          Nous proc\xE9dons au paiement\n        ",c="\n          Commande re\xE7ue\n        ";const k=function(e){return{active:e}},O=[{path:"",component:(()=>{class e{constructor(e,t,r,o,n,i,c){this.router=e,this.checkoutService=t,this.constants=r,this.basketService=o,this.gtmService=n,this.brazeService=i,this.loggerService=c,this.paymentSuccess=!1}ngOnDestroy(){this.processPaymentSubscription&&this.processPaymentSubscription.unsubscribe()}ngOnInit(){var e=this.basketService.currentBasketDetails,t=this.checkoutService.checkOutData;this.checkoutService.checkOutData.customerId&&(this.customerId=this.checkoutService.checkOutData.customerId),e?this.processPaymentSubscription=this.checkoutService.processPayment(e.id,t).subscribe(t=>{t&&t.orderIdTracker&&t.orderNumber?(this.gtmService.purchase(t.orderNumber),this.brazeService.logPurchase(t.orderNumber,"Web"),this.basketService.clearBasket(),this.paymentSuccess=!0,this.loggerService.logInfo(`Order submitted successfully for basket id -${e.id} , OrderTrackerNumber - ${t.orderNumber}`).subscribe(),setTimeout(()=>{this.router.navigate(["/confirmation-de-commande/"+t.orderIdTracker])},2e3)):(this.loggerService.logInfo("Order submission failed for basket id -"+e.id).subscribe(),this.checkoutService.error=this.constants.GENERIC_ERROR,this.router.navigate(["/paiement"]))},t=>{this.loggerService.logInfo(`Order submission failed for basket id -${e.id} with error ${JSON.stringify(t)}`).subscribe(),this.checkoutService.error=t.error,this.router.navigate(["/paiement"])}):this.router.navigate(["/"])}}return e.\u0275fac=function(t){return new(t||e)(p.Ob(a.e),p.Ob(d.a),p.Ob(l.a),p.Ob(b.a),p.Ob(m.a),p.Ob(u.a),p.Ob(g.a))},e.\u0275cmp=p.Ib({type:e,selectors:[["app-process-payment"]],decls:8,vars:5,consts:[[1,"container","page-wrapper","order-proccessing-block"],[1,"custom-loader",3,"ngClass"],[1,"loader"],[1,"checkmark"],[4,"ngIf"]],template:function(e,t){1&e&&(p.Ub(0,"section",0),p.Ub(1,"h1"),p.Yb(2,o),p.Tb(),p.Ub(3,"div",1),p.Pb(4,"div",2),p.Pb(5,"div",3),p.Tb(),p.Lc(6,h,5,0,"div",4),p.Lc(7,f,3,0,"div",4),p.Tb()),2&e&&(p.Bb(3),p.rc("ngClass",p.vc(3,k,t.paymentSuccess)),p.Bb(3),p.rc("ngIf",!t.paymentSuccess),p.Bb(1),p.rc("ngIf",t.paymentSuccess))},directives:[s.j,s.l],styles:['.custom-loader[_ngcontent-%COMP%]{margin:0 auto 1.4285714286rem}.custom-loader[_ngcontent-%COMP%], .custom-loader[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{width:10em;height:10em;position:relative}.custom-loader[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{margin-bottom:5em;border:8px solid rgba(0,0,0,.2);border-left-color:#e4002b;animation:loader-spin 1.2s linear infinite;display:inline-block;vertical-align:top;border-radius:50%}.custom-loader[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{position:absolute;top:4px;display:none}.custom-loader[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{opacity:1;height:5em;width:2.5em;-ms-transform-origin:left top;transform-origin:left top;border-right:8px solid #e4002b;border-top:8px solid #e4002b;content:"";left:2.5em;top:5em;position:absolute}.custom-loader.active[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{animation:none;border-color:#e4002b;transition:border .5s ease-out}.custom-loader.active[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{display:block}.custom-loader.active[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{animation-duration:.8s;animation-timing-function:ease;animation-name:checkmark;-ms-transform:scaleX(-1) rotate(135deg);transform:scaleX(-1) rotate(135deg)}@keyframes checkmark{0%{height:0;width:0;opacity:1}20%{height:0;width:2.5em;opacity:1}40%{height:5em;width:2.5em;opacity:1}to{height:5em;width:2.5em;opacity:1}}@keyframes loader-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.order-proccessing-block[_ngcontent-%COMP%]{padding-top:6.4285714286rem;min-height:500px}.order-proccessing-block[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;font-family:National2Condensed-Bold;margin-bottom:1.4285714286rem;text-transform:uppercase;font-size:2.5714285714rem;line-height:36px}.order-proccessing-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.order-proccessing-block[_ngcontent-%COMP%]   .custom-loader[_ngcontent-%COMP%]{margin-top:2.8571428571rem;margin-bottom:3.5714285714rem}@media (min-width:768px){.order-proccessing-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2857142857rem}}@media (min-width:768px){.order-proccessing-block[_ngcontent-%COMP%]{padding-top:10.7142857143rem}}']}),e})()}];let v=(()=>{class e{}return e.\u0275mod=p.Mb({type:e}),e.\u0275inj=p.Lb({factory:function(t){return new(t||e)},imports:[[a.i.forChild(O)],a.i]}),e})();var y=r("3Pt+"),P=r("PCNd");let C=(()=>{class e{}return e.\u0275mod=p.Mb({type:e}),e.\u0275inj=p.Lb({factory:function(t){return new(t||e)},imports:[[s.b,y.w,v,P.a]]}),e})()}}]);