(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{lKKO:function(e,t,n){"use strict";n.r(t),n.d(t,"AccountModule",(function(){return vt}));var o=n("ofXK"),r=n("tyNb"),i=n("3Pt+"),a=n("MsxC"),s=n("8/fu"),c=n("zx3v"),l=n("SxV6"),d=n("IF+5"),b=n("ASjP"),m=n("J8yP"),g=n("pCEw"),p=n("fFWf"),h=n("YXjc"),u=n("2Vo4"),f=n("AytR"),C=n("fXoL"),O=n("tk/3");let w=(()=>{class e{constructor(e,t){this.http=e,this.authenticationService=t,this.userId="",this.olduserInputSubject=new u.a("")}olduserInput(e){console.log(e),this.userId=e}getOldUserInput(){return this.http.get(f.a.apiUrl+"loyalty/oldmember/"+this.userId)}}return e.\u0275fac=function(t){return new(t||e)(C.ec(O.b),C.ec(a.a))},e.\u0275prov=C.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var P,v,M,T,_=n("jCJ1"),x=n("Q3OG"),y=n("ajRT"),S=n("VkHG");P="\n          BIENVENUE\n        ",v="\n          Votre compte a \xE9t\xE9 cr\xE9\xE9 avec succ\xE8s.\n        ",M="\n          Commander\n        ",T="\n          Acc\xE9der \xE0 Mon compte\n        ";let k=(()=>{class e{constructor(e,t,n){this.router=e,this.modalService=t,this.constants=n}ngOnInit(){}onStartOrder(){this.router.navigate(["/notre-carte"]),this.modalService.close(this.constants.MODAL_REGISTRATION)}onGotoMyAccount(){this.router.navigate(["/loyalty"]),this.modalService.close(this.constants.MODAL_REGISTRATION)}}return e.\u0275fac=function(t){return new(t||e)(C.Ob(r.e),C.Ob(s.a),C.Ob(c.a))},e.\u0275cmp=C.Ib({type:e,selectors:[["app-registration-confirmation"]],decls:11,vars:4,consts:[[1,"text-uppercase"],[3,"btnClass","btnType","btnClick"],[1,"button-content"]],template:function(e,t){1&e&&(C.Ub(0,"h2",0),C.Yb(1,P),C.Tb(),C.Ub(2,"p"),C.Yb(3,v),C.Tb(),C.Ub(4,"div"),C.Ub(5,"app-button",1),C.ic("btnClick",(function(){return t.onStartOrder()})),C.Sb(6,2),C.Yb(7,M),C.Rb(),C.Tb(),C.Ub(8,"app-button",1),C.ic("btnClick",(function(){return t.onGotoMyAccount()})),C.Sb(9,2),C.Yb(10,T),C.Rb(),C.Tb(),C.Tb()),2&e&&(C.Bb(5),C.rc("btnClass","btn btn-block mb-3")("btnType","raised"),C.Bb(3),C.rc("btnClass","btn btn-white btn-block")("btnType","flat"))},directives:[S.a],styles:[""]}),e})();var U,I,R,N,L,B,F,E,z,A,Y,D,$,V,q,j,G,K,J,X,H,W,Z,Q=n("TtYX"),ee=n("kmnG"),te=n("qFsG"),ne=n("d3UM"),oe=n("bSwM"),re=n("FKr1"),ie=n("ElE/"),ae=n("VRPO");function se(e,t){if(1&e&&(C.Ub(0,"li"),C.Nc(1),C.Tb()),2&e){const e=t.$implicit;C.Bb(1),C.Oc(e)}}function ce(e,t){if(1&e&&(C.Sb(0),C.Ub(1,"ul"),C.Lc(2,se,2,1,"li",56),C.Tb(),C.Rb()),2&e){const e=C.mc(3);C.Bb(2),C.rc("ngForOf",e.error.errors)}}function le(e,t){if(1&e&&(C.Ub(0,"ul"),C.Ub(1,"li"),C.Nc(2),C.Tb(),C.Tb()),2&e){const e=C.mc(3);C.Bb(2),C.Oc(e.constants.GENERIC_ERROR)}}function de(e,t){if(1&e&&(C.Ub(0,"app-message-info",62),C.Sb(1,63),C.Lc(2,ce,3,1,"ng-container",64),C.Lc(3,le,3,1,"ng-template",null,65,C.Mc),C.Rb(),C.Tb()),2&e){const e=C.Bc(4),t=C.mc(2);C.rc("showError",t.showError)("msgType","error"),C.Bb(2),C.rc("ngIf",t.error&&t.error.errors&&t.error.errors.length>0)("ngIfElse",e)}}function be(e,t){1&e&&(C.Ub(0,"mat-error",66),C.Sb(1),C.Yb(2,D),C.Rb(),C.Tb())}function me(e,t){1&e&&(C.Ub(0,"mat-error",66),C.Sb(1),C.Yb(2,$),C.Rb(),C.Tb())}function ge(e,t){1&e&&(C.Ub(0,"mat-error",66),C.Sb(1),C.Nc(2,"Veuillez entrer le num\xe9ro de t\xe9l\xe9phone"),C.Rb(),C.Tb())}function pe(e,t){1&e&&(C.Ub(0,"mat-error",66),C.Sb(1),C.Nc(2," Le format du num\xe9ro de t\xe9l\xe9phone n\u2019est pas correct"),C.Rb(),C.Tb())}function he(e,t){1&e&&(C.Ub(0,"mat-error",66),C.Sb(1),C.Yb(2,V),C.Rb(),C.Tb())}function ue(e,t){1&e&&(C.Ub(0,"mat-error",66),C.Sb(1),C.Yb(2,q),C.Rb(),C.Tb())}function fe(e,t){if(1&e&&(C.Ub(0,"mat-option",67),C.Nc(1),C.Tb()),2&e){const e=t.$implicit;C.rc("value",e.value),C.Bb(1),C.Oc(e.label)}}function Ce(e,t){1&e&&(C.Ub(0,"mat-error",66),C.Sb(1),C.Yb(2,j),C.Rb(),C.Tb())}function Oe(e,t){if(1&e&&(C.Ub(0,"mat-option",67),C.Nc(1),C.Tb()),2&e){const e=t.$implicit;C.rc("value",e),C.Bb(1),C.Oc(e)}}function we(e,t){1&e&&(C.Ub(0,"mat-error",66),C.Sb(1),C.Yb(2,G),C.Rb(),C.Tb())}function Pe(e,t){1&e&&(C.Ub(0,"div",33),C.Ub(1,"div",68),C.Sb(2),C.Nc(3,"Nous sommes d\xe9sol\xe9s, vous n'avez pas l'\xe2ge l\xe9gal pour avoir un compte client KFC"),C.Rb(),C.Tb(),C.Tb())}function ve(e,t){if(1&e){const e=C.Vb();C.Ub(0,"div"),C.Ub(1,"app-password-strength",69),C.ic("passwordStrength",(function(t){return C.Ec(e),C.mc(2).passwordValid(t)})),C.Tb(),C.Tb()}if(2&e){const e=C.mc(2);C.Bb(1),C.rc("passwordToCheck",e.registerForm.value.password)}}function Me(e,t){1&e&&(C.Ub(0,"div",66),C.Sb(1),C.Yb(2,K),C.Rb(),C.Tb())}function Te(e,t){1&e&&(C.Ub(0,"div",66),C.Sb(1),C.Yb(2,J),C.Rb(),C.Tb())}function _e(e,t){1&e&&(C.Ub(0,"div",66),C.Nc(1," Attention, votre mot de passe d\xe9passe les 50 caract\xe8res obligatoire "),C.Tb())}function xe(e,t){1&e&&(C.Ub(0,"div",66),C.Sb(1),C.Yb(2,X),C.Rb(),C.Tb())}function ye(e,t){if(1&e){const e=C.Vb();C.Ub(0,"li"),C.Ub(1,"mat-checkbox",70),C.ic("change",(function(t){return C.Ec(e),C.mc(2).onChannelChange(t)})),C.Nc(2),C.Tb(),C.Tb()}if(2&e){const e=t.$implicit;C.Bb(1),C.rc("value",e.value)("checked",e.checked),C.Bb(1),C.Pc(" ",e.label," ")}}function Se(e,t){1&e&&(C.Ub(0,"div",66),C.Sb(1),C.Yb(2,H),C.Rb(),C.Tb())}function ke(e,t){1&e&&(C.Ub(0,"span",71),C.Yb(1,W),C.Tb())}function Ue(e,t){1&e&&(C.Ub(0,"span",71),C.Yb(1,Z),C.Tb())}U="\n          Confirmation d'inscription\n          " + "\ufffd#15\ufffd" + "" + "\ufffd#16\ufffd" + "" + "\ufffd/#16\ufffd" + "" + "\ufffd/#15\ufffd" + "\n        ",I="Cr\xE9er un compte ",R="Nom",N="Pr\xE9nom",L="T\xE9l\xE9phone",B="Email",F="Anniversaire",E="Mois",z="Ann\xE9e",A="Mot de passe",Y="\n          D\xE9j\xE0 client ?\n          " + "\ufffd#98\ufffd" + "Se connecter" + "\ufffd/#98\ufffd" + "\n        ",D="\n          Veuillez saisir votre nom.\n        ",$="\n          Pr\xE9nom\n        ",V="\n          Adresse email\n        ",q="\n          Veuillez saisir une adresse email valide\n        ",j="Mois",G="Ann\xE9e",K="\n          Mot de passe\n        ",J="\n          Les mots de passe doivent inclure une lettre majuscule, une lettre minuscule, un chiffre et l'un des symboles suivants:! @ # $% &-?^*\n        ",X="\n          J'accepte les conditions g\xE9n\xE9rales d'inscription\n        ",H="Veuillez s\xE9lectionner un moyen de communication.",W="\n          Cr\xE9er mon compte\n        ",Z="\n          CR\xC9ER UN COMPTE\n        ";const Ie=function(e,t){return{"icon-password":e,"icon-password-slash":t}},Re=function(){return["/cgu-click-collect"]},Ne=function(){return["/mon-compte/connexion"]};function Le(e,t){if(1&e){const e=C.Vb();C.Ub(0,"div"),C.Ub(1,"h1"),C.Yb(2,I),C.Tb(),C.Ub(3,"p",18),C.Ub(4,"strong"),C.Nc(5,"JE M\u2019INSCRIS AVEC"),C.Tb(),C.Tb(),C.Ub(6,"div",19),C.Pb(7,"app-social-connect"),C.Ub(8,"p",20),C.Ub(9,"span"),C.Nc(10,"OU"),C.Tb(),C.Tb(),C.Tb(),C.Lc(11,de,5,4,"app-message-info",21),C.Ub(12,"form",22),C.ic("ngSubmit",(function(){return C.Ec(e),C.mc().registerFormSubmit()})),C.Ub(13,"div",23),C.Ub(14,"mat-form-field"),C.Ub(15,"mat-label"),C.Yb(16,R),C.Tb(),C.Pb(17,"input",24,25),C.Lc(19,be,3,0,"mat-error",26),C.Tb(),C.Ub(20,"mat-form-field"),C.Ub(21,"mat-label"),C.Yb(22,N),C.Tb(),C.Pb(23,"input",27,28),C.Lc(25,me,3,0,"mat-error",26),C.Tb(),C.Tb(),C.Ub(26,"div",23),C.Ub(27,"mat-form-field"),C.Ub(28,"mat-label"),C.Yb(29,L),C.Tb(),C.Pb(30,"input",29,30),C.Lc(32,ge,3,0,"mat-error",26),C.Lc(33,pe,3,0,"mat-error",26),C.Tb(),C.Ub(34,"mat-form-field"),C.Ub(35,"mat-label"),C.Yb(36,B),C.Tb(),C.Pb(37,"input",31,32),C.Lc(39,he,3,0,"mat-error",26),C.Lc(40,ue,3,0,"mat-error",26),C.Tb(),C.Tb(),C.Ub(41,"div",33),C.Ub(42,"div",34),C.Ub(43,"h6",35),C.Ub(44,"span"),C.Yb(45,F),C.Tb(),C.Ub(46,"span"),C.Nc(47,"*"),C.Tb(),C.Nc(48,":"),C.Tb(),C.Tb(),C.Ub(49,"mat-form-field",36),C.Ub(50,"mat-label"),C.Yb(51,E),C.Tb(),C.Ub(52,"mat-select",37,38),C.ic("selectionChange",(function(t){C.Ec(e);const n=C.mc();return n.onMonthChange(),n.agevalidity(t)})),C.Lc(54,fe,2,2,"mat-option",39),C.Tb(),C.Lc(55,Ce,3,0,"mat-error",26),C.Tb(),C.Ub(56,"mat-form-field",40),C.Ub(57,"mat-label"),C.Yb(58,z),C.Tb(),C.Ub(59,"mat-select",41,42),C.ic("selectionChange",(function(t){return C.Ec(e),C.mc().agevalidity(t)})),C.Lc(61,Oe,2,2,"mat-option",39),C.Tb(),C.Lc(62,we,3,0,"mat-error",26),C.Tb(),C.Tb(),C.Lc(63,Pe,4,0,"div",43),C.Ub(64,"div",44),C.Lc(65,ve,2,1,"div",7),C.Ub(66,"mat-form-field"),C.Ub(67,"mat-label"),C.Yb(68,A),C.Tb(),C.Ub(69,"input",45,46),C.ic("blur",(function(){return C.Ec(e),C.mc().passwordStrengthClose()}))("click",(function(){return C.Ec(e),C.mc().passwordStrengthShow()}))("focus",(function(){return C.Ec(e),C.mc().passwordStrengthShow()})),C.Tb(),C.Tb(),C.Ub(71,"a",47),C.ic("click",(function(){return C.Ec(e),C.mc().showPassword()})),C.Pb(72,"i",48),C.Tb(),C.Lc(73,Me,3,0,"div",26),C.Lc(74,Te,3,0,"div",26),C.Lc(75,_e,2,0,"div",26),C.Tb(),C.Ub(76,"div",49),C.Ub(77,"mat-checkbox",50),C.ic("checked",(function(){return C.Ec(e),C.mc().acceptTermConditions})),C.Nc(78," J\u2019accepte les "),C.Ub(79,"a",51),C.Nc(80,"conditions d\u2019utilisation"),C.Tb(),C.Nc(81," et je comprends que mes donn\xe9es personnelles seront trait\xe9es selon la "),C.Ub(82,"a",52),C.Nc(83,"politique de Centre de confidentialit\xe9"),C.Tb(),C.Nc(84,". "),C.Tb(),C.Lc(85,xe,3,0,"div",26),C.Tb(),C.Ub(86,"div",53),C.Ub(87,"p",54),C.Nc(88," J\u2019accepte de recevoir des offres et actualit\xe9s de la part de KFC France par:"),C.Tb(),C.Ub(89,"ul",55),C.Lc(90,ye,3,3,"li",56),C.Tb(),C.Lc(91,Se,3,0,"div",26),C.Tb(),C.Ub(92,"div",57),C.Ub(93,"app-button",58),C.Lc(94,ke,2,0,"span",59),C.Lc(95,Ue,2,0,"span",59),C.Tb(),C.Tb(),C.Tb(),C.Ub(96,"p",60),C.dc(97,Y),C.Pb(98,"a",61),C.ac(),C.Tb(),C.Tb()}if(2&e){const e=C.mc();C.Bb(11),C.rc("ngIf",e.showError),C.Bb(1),C.rc("formGroup",e.registerForm),C.Bb(7),C.rc("ngIf",e.lastName.touched&&(null==e.lastName.errors?null:e.lastName.errors.required)),C.Bb(6),C.rc("ngIf",e.firstName.touched&&(null==e.firstName.errors?null:e.firstName.errors.required)),C.Bb(7),C.rc("ngIf",e.phoneNumber.touched&&(null==e.phoneNumber.errors?null:e.phoneNumber.errors.required)),C.Bb(1),C.rc("ngIf",e.phoneNumber.touched&&e.phoneNumber.invalid&&e.phoneNumber.value),C.Bb(6),C.rc("ngIf",e.email.touched&&(null==e.email.errors?null:e.email.errors.required)),C.Bb(1),C.rc("ngIf",e.email.touched&&(null==e.email.errors?null:e.email.errors.email)),C.Bb(14),C.rc("ngForOf",e.months),C.Bb(1),C.rc("ngIf",e.birthMonth.touched&&(null==e.birthMonth.errors?null:e.birthMonth.errors.required)),C.Bb(6),C.rc("ngForOf",e.years),C.Bb(1),C.rc("ngIf",e.birthYear.touched&&(null==e.birthYear.errors?null:e.birthYear.errors.required)),C.Bb(1),C.rc("ngIf",e.belowAgeLimit),C.Bb(2),C.rc("ngIf",e.passwordStrengthOpen),C.Bb(4),C.rc("type",e.passwordType?"text":"password"),C.Bb(3),C.rc("ngClass",C.wc(43,Ie,!e.passwordType,e.passwordType)),C.Bb(1),C.rc("ngIf",e.password.touched&&(null==e.password.errors?null:e.password.errors.required)),C.Bb(1),C.rc("ngIf",e.password.touched&&(null==e.password.errors?null:e.password.errors.pattern)),C.Bb(1),C.rc("ngIf",e.password.value.length>50),C.Bb(4),C.rc("routerLink",C.uc(46,Re))("matRippleColor","grey")("matRippleCentered",!0)("matRippleRadius","30")("matRippleUnbounded",!0),C.Bb(3),C.rc("matRippleColor","grey")("matRippleCentered",!0)("matRippleRadius","30")("matRippleUnbounded",!0),C.Bb(3),C.rc("ngIf",e.acceptTermConditions.touched&&(null==e.acceptTermConditions.errors?null:e.acceptTermConditions.errors.required)),C.Bb(5),C.rc("ngForOf",e.channels),C.Bb(1),C.rc("ngIf",e.subscribeChannel.touched&&(null==e.subscribeChannel.errors?null:e.subscribeChannel.errors.invalid)),C.Bb(2),C.rc("btnTag","button")("btnTagType","submit")("btnClass","btn btn-block")("spinnerVisible",e.showSpinner)("isDisabled",e.showSpinner)("btnType","raised"),C.Bb(1),C.rc("ngIf",!e.commonService.isMobileDevice()),C.Bb(1),C.rc("ngIf",e.commonService.isMobileDevice()),C.Bb(3),C.rc("routerLink",C.uc(47,Ne))("matRippleCentered",!0)("matRippleRadius","30")("matRippleUnbounded",!0)}}function Be(e,t){1&e&&(C.Ub(0,"div",72),C.Pb(1,"app-registration-confirmation"),C.Tb())}function Fe(e,t){if(1&e&&(C.Ub(0,"p",74),C.Nc(1),C.Tb()),2&e){const e=t.$implicit;C.Bb(1),C.Pc(" ",e," ")}}function Ee(e,t){if(1&e&&(C.Ub(0,"div",15),C.Lc(1,Fe,2,1,"p",73),C.Tb()),2&e){const e=C.mc();C.Bb(1),C.rc("ngForOf",e.userresponse.errors.errors)}}function ze(e,t){if(1&e&&(C.Ub(0,"p",74),C.Nc(1),C.Tb()),2&e){const e=t.$implicit;C.Bb(1),C.Pc(" ",e," ")}}function Ae(e,t){if(1&e&&(C.Ub(0,"div",15),C.Lc(1,ze,2,1,"p",73),C.Tb()),2&e){const e=C.mc();C.Bb(1),C.rc("ngForOf",e.userresponse.errors.errors)}}let Ye=(()=>{class e{constructor(e,t,n,o,r,i,a,s,c,l,d,b,m,g){this.formBuilder=e,this.orderService=t,this.authenticationService=n,this.recaptchaV3Service=o,this.router=r,this.route=i,this.modalService=a,this.constants=s,this.gtmService=c,this.commonService=l,this.userService=d,this.basketService=b,this.brazeService=m,this.olduserService=g,this.passwordIsValid=!1,this.passwordStrengthOpen=!1,this.marketOptIn=!1,this.channels=this.constants.SUBSCRIPTION_CHANNELS,this.years=this.commonService.getYears(),this.months=this.commonService.getLocalizedMonthNames(),this.days=[],this.belowAgeLimit=!1,this.isLoyaltyError=!1,this.isBasketItem=!1,this.paramDetails="",this.loadMaponCookieConsent=!1}ngOnInit(){this.isLoggedIn=this.authenticationService.isLoggedIn(),this.route.queryParams.subscribe(e=>{this.paramDetails=e.id,this.olduserService.olduserInput(this.paramDetails),this.paramDetails&&this.olduserService.getOldUserInput().subscribe(e=>{console.log(e),this.oldCustomerData=e,this.loadRegisterForm()})}),!this.isLoggedIn&&this.userService.guestCustomerData&&(this.customerData=this.userService.guestCustomerData,this.userService.guestCustomerData=null),this.loadRegisterForm(),document.body.classList.add("recaptcha"),this.gtmService.startRegistration(),this.isLoyaltyError=!1,this.isBasketItem=!1}ngAfterViewInit(){this.loadMaponCookieConsent=!0}calAge(){let e,t=this.registerForm.get("birthYear").value,n=this.registerForm.get("birthMonth").value,o=new Date,r=o.getFullYear(),i=o.getMonth(),a=r-t;if(i>=n)var s=i-n;else a--,s=12+i-n;e=12*a+s,e<180&&(this.belowAgeLimit=!0),console.log(e)}agevalidity(e){this.belowAgeLimit=!1}ngOnDestroy(){document.body.classList.remove("recaptcha")}loadRegisterForm(){this.registerForm=this.formBuilder.group({firstName:new i.f(this.oldCustomerData?this.oldCustomerData.firstName:"",{validators:this.commonService.firstNameValidators()}),lastName:new i.f(this.oldCustomerData?this.oldCustomerData.lastName:"",{validators:this.commonService.lastNameValidators()}),phoneNumber:new i.f(this.oldCustomerData?this.oldCustomerData.phoneNumber:"",{validators:this.commonService.phoneNumberValidators()}),email:new i.f(this.oldCustomerData?this.oldCustomerData.email:"",{validators:this.commonService.emailValidators()}),password:new i.f("",{validators:this.commonService.passwordValidators()}),marketingOptIn:new i.f(!1),birthYear:new i.f(this.oldCustomerData?this.oldCustomerData.birthYear:"",{validators:this.commonService.dobValidators()}),birthMonth:new i.f(this.oldCustomerData?this.oldCustomerData.birthMonth:"",{validators:this.commonService.dobValidators()}),subscribeChannel:new i.c(this.initChannelFormArray()),acceptTermConditions:new i.f("",[e=>e.value?null:{required:!0}])})}initChannelFormArray(){return this.channels.forEach(e=>e.checked=0),this.channels.map(e=>new i.f(e.checked?e.value:e.checked))}get firstName(){return this.registerForm.get("firstName")}get lastName(){return this.registerForm.get("lastName")}get phoneNumber(){return this.registerForm.get("phoneNumber")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get birthYear(){return this.registerForm.get("birthYear")}get birthMonth(){return this.registerForm.get("birthMonth")}get marketingOptIn(){return this.registerForm.get("marketingOptIn")}get subscribeChannel(){return this.registerForm.get("subscribeChannel")}get acceptTermConditions(){return this.registerForm.get("acceptTermConditions")}registerFormSubmit(){if(this.calAge(),this.belowAgeLimit)return!1;this.registerForm.valid?(this.showSpinner=!0,this.showError=!1,this.registerForm.value.birthDay=1,this.recaptchaV3Service.execute("registerFormSubmit").subscribe(e=>{this.recaptchav3_token=e;let t=new Date(Date.UTC(this.registerForm.value.birthYear,this.registerForm.value.birthMonth,1));this.registerForm.value.DOB=t.toISOString();try{this.registerForm.value.RegisterChannelType=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Mobile Browser":"Desktop Browser"}catch(n){}console.log("Form value",this.registerForm.value),this.authenticationService.register(this.registerForm.value,this.recaptchav3_token).pipe(Object(l.a)()).subscribe(e=>{this.userresponse=e,this.showSpinner=!1,this.userresponse.errors&&this.userresponse.errors.errors.length>0&&(this.isLoyaltyError=!0,this.modalService.open(this.constants.MODAL_lOYALTYERROR)),this.isRegistrationSuccess=!0,this.brazeService.setRegistrationInfo(e.user,this.registerForm.value.DOB),this.gtmService.endRegistration(),this.gtmService.registrationFinish(e.user);var t=this.basketService.currentBasketDetails;t&&t.items&&t.items.length>0?this.isBasketItem=!0:this.commonService.isMobileDevice()?(this.modalService.close(this.constants.MODAL_lOYALTYERROR),this.modalService.open(this.constants.MODAL_REGISTRATION)):this.scrollToTop(),this.resetSubscribeChannel()},e=>{this.showSpinner=!1,this.showError=!0,this.error=e.error,this.gtmService.embeddedErrormsg(this.error.errors[0])})},e=>{this.error="Error trying to verify request reCaptcha v3"})):(setTimeout(()=>{this.scrollToErrorMessage()},0),this.registerForm.markAllAsTouched())}scrollToTop(){setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},0)}scrollToErrorMessage(){const e=document.querySelector(".text-error"),t=e&&e.getBoundingClientRect().top+window.pageYOffset;t&&window.scrollTo({top:t-135,behavior:"smooth"})}showPassword(){this.passwordType=!this.passwordType}onCloseModal(){this.modalService.close(this.constants.MODAL_REGISTRATION),this.router.navigate(["/mon-compte/connexion"])}onCloseModalError(){this.modalService.close(this.constants.MODAL_lOYALTYERROR),this.isBasketItem&&this.router.navigate(["/paiement"])}passwordValid(e){this.passwordIsValid=e}passwordStrengthShow(){this.passwordStrengthOpen=!0}passwordStrengthClose(){this.passwordStrengthOpen=!1}validateNumber(e){(e.charCode<48||e.charCode>57)&&e.preventDefault()}onMonthChange(){let e=+this.registerForm.get("birthYear").value,t=+this.registerForm.get("birthMonth").value;this.days=this.commonService.getDaysByMonth(e,t)}onChannelChange(e){let t=this.channels.findIndex(t=>t.value===e.source.value);this.channels[t].checked=e.checked?1:0;let n=this.channels.map(e=>e.checked?e.value:e.checked);this.subscribeChannel.patchValue(n),1!=n[0]&&2!=n[1]||this.registerForm.patchValue({marketingOptIn:!0})}onMarketingOptInChange(e){e.checked?this.marketOptIn=!0:(this.channels.forEach(e=>e.checked=0),this.marketOptIn=!1);let t=this.channels.map(e=>e.checked?e.value:e.checked);this.subscribeChannel.patchValue(t)}resetSubscribeChannel(){this.channels=this.constants.SUBSCRIPTION_CHANNELS,this.subscribeChannel.patchValue(this.initChannelFormArray())}validateSubscribeChannel(){var e=0;if(this.channels.forEach(t=>{if(t.checked)return!0;e++}),2==e)return this.subscribeChannel.setErrors({invalid:!0}),!1}}return e.\u0275fac=function(t){return new(t||e)(C.Ob(i.e),C.Ob(b.a),C.Ob(a.a),C.Ob(_.d),C.Ob(r.e),C.Ob(r.a),C.Ob(s.a),C.Ob(c.a),C.Ob(h.a),C.Ob(d.a),C.Ob(m.a),C.Ob(g.a),C.Ob(p.a),C.Ob(w))},e.\u0275cmp=C.Ib({type:e,selectors:[["app-register"]],decls:25,vars:18,consts:[[1,"container","login-content"],[1,"page-block"],[1,"block-right","order-md-2","appear-right"],[1,"banner-area","d-block","d-md-none"],[3,"routerLink"],[3,"imgClassName","imgFolder","imgName"],[1,"login-section","form-area"],[4,"ngIf"],["class","d-none d-md-block",4,"ngIf"],[1,"block-left","order-md-1","appear-left","loader-bg","d-none","d-md-block"],[3,"imgFolder","imgName","imgClassName","imgLazyLoad","altText"],[1,"custom-common-modal","registration-confirmation-modal","full-height-modal-mobile",3,"id"],[1,"modal-header","clearfix"],["href","javascript:void(0)",1,"modal-close",3,"click"],[1,"icon-close"],[1,"modal-body","text-center"],["class","modal-body text-center",4,"ngIf"],[1,"custom-common-modal",3,"id"],[1,"register-subheader"],["id","social-connect-space-register",1,"social-section","mt-4"],[1,"divider"],[3,"showError","msgType",4,"ngIf"],[1,"register-form",3,"formGroup","ngSubmit"],[1,"field-row"],["matInput","","placeholde","","required","","maxlength","50","formControlName","lastName","id","lastName"],["userLastname",""],["class","text-error",4,"ngIf"],["matInput","","placeholder","","required","","maxlength","50","formControlName","firstName","id","firstName"],["userFirstname",""],["matInput","","placeholder","","required","","maxlength","10","type","tel","formControlName","phoneNumber","id","phoneNumber"],["userPhone",""],["matInput","","placeholder","","required","","type","email","formControlName","email","id","email"],["userEmail",""],[1,"field-row","birth-row"],[1,"birth-txt"],[1,"mb-0","h6-normal"],[1,"birth-month"],["formControlName","birthMonth","required","","id","birthMonth",3,"selectionChange"],["userBirthMonth",""],[3,"value",4,"ngFor","ngForOf"],[1,"birth-year"],["formControlName","birthYear","id","birthYear","required","",3,"selectionChange"],["userBirthYear",""],["class","field-row birth-row",4,"ngIf"],[1,"form-group","input-with-icon"],["matInput","","required","","formControlName","password","id","password",3,"type","blur","click","focus"],["userPassword",""],["href","javascript:void(0);",3,"click"],[3,"ngClass"],[1,"form-group","mb-4","form-group-without-height"],["formControlName","acceptTermConditions",3,"checked"],["href","javascript:void(0)","target","_blank","matRipple","",1,"text-bold",3,"routerLink","matRippleColor","matRippleCentered","matRippleRadius","matRippleUnbounded"],["href","https://privacy.kfc.fr/policies","target","_blank","matRipple","",1,"text-bold",3,"matRippleColor","matRippleCentered","matRippleRadius","matRippleUnbounded"],[1,"form-group","preferred-channels"],[1,"mb-2"],[1,"communication-list"],[4,"ngFor","ngForOf"],[1,"sticky-button"],[3,"btnTag","btnTagType","btnClass","spinnerVisible","isDisabled","btnType"],["class","button-content",4,"ngIf"],[1,"text-center","mt-4"],["matRipple","",1,"text-bold","link-underline",3,"routerLink","matRippleCentered","matRippleRadius","matRippleUnbounded"],[3,"showError","msgType"],[1,"message-content"],[4,"ngIf","ngIfElse"],["genericError",""],[1,"text-error"],[3,"value"],[1,"text-error","font-15"],[3,"passwordToCheck","passwordStrength"],["formArrayName","subscribeChannel",3,"value","checked","change"],[1,"button-content"],[1,"d-none","d-md-block"],["class","red-hightlighted-text",4,"ngFor","ngForOf"],[1,"red-hightlighted-text"]],template:function(e,t){1&e&&(C.Ub(0,"section",0),C.Ub(1,"div",1),C.Ub(2,"div",2),C.Ub(3,"div",3),C.Ub(4,"a",4),C.Pb(5,"app-picture",5),C.Tb(),C.Tb(),C.Ub(6,"div",6),C.Lc(7,Le,99,48,"div",7),C.Lc(8,Be,2,0,"div",8),C.Tb(),C.Tb(),C.Ub(9,"div",9),C.Ub(10,"a",4),C.Pb(11,"app-picture",10),C.Tb(),C.Tb(),C.Tb(),C.Tb(),C.Ub(12,"modal-dialog",11),C.Ub(13,"div",12),C.dc(14,U),C.Ub(15,"a",13),C.ic("click",(function(){return t.onCloseModal()})),C.Pb(16,"i",14),C.Tb(),C.ac(),C.Tb(),C.Ub(17,"div",15),C.Pb(18,"app-registration-confirmation"),C.Tb(),C.Lc(19,Ee,2,1,"div",16),C.Tb(),C.Ub(20,"modal-dialog",17),C.Ub(21,"div",12),C.Ub(22,"a",13),C.ic("click",(function(){return t.onCloseModalError()})),C.Pb(23,"i",14),C.Tb(),C.Tb(),C.Lc(24,Ae,2,1,"div",16),C.Tb()),2&e&&(C.Bb(4),C.rc("routerLink",C.uc(16,Ne)),C.Bb(1),C.rc("imgClassName","img-fluid")("imgFolder","loyalty")("imgName","reg-xs.jpg"),C.Bb(2),C.rc("ngIf",!t.isRegistrationSuccess),C.Bb(1),C.rc("ngIf",t.isRegistrationSuccess),C.Bb(2),C.rc("routerLink",C.uc(17,Ne)),C.Bb(1),C.rc("imgFolder","loyalty")("imgName","reg-lg.jpg")("imgClassName","img-fluid")("imgLazyLoad",!0)("altText","register"),C.Bb(1),C.sc("id",t.constants.MODAL_REGISTRATION),C.Bb(7),C.rc("ngIf",t.userresponse&&t.isLoyaltyError),C.Bb(1),C.sc("id",t.constants.MODAL_lOYALTYERROR),C.Bb(4),C.rc("ngIf",t.userresponse))},directives:[r.h,x.a,o.l,y.a,k,Q.a,i.z,i.q,i.i,ee.c,ee.f,te.b,i.b,i.x,i.l,i.p,i.g,ne.a,o.k,o.j,oe.a,re.l,S.a,ie.a,ee.b,re.j,ae.a,i.d],styles:['.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0 1.0714285714rem}@media (min-width:768px){.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0 2.1428571429rem}}@media (min-width:1200px){.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0 2.8571428571rem}}@media (min-width:1580px){.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0 1.0714285714rem}}.login-content[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]{padding:.7142857143rem 1.0714285714rem}@media (min-width:768px){.login-content[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]{padding:2.1428571429rem}}@media (min-width:1200px){.login-content[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]{padding:.7142857143rem 2.8571428571rem}}@media (min-width:1580px){.login-content[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]{padding:4.2857142857rem 1.0714285714rem}}@media (max-width:991px){.login-content[_ngcontent-%COMP%]{padding:0}}@media (min-width:992px){.login-content[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]{-ms-flex:0 0 45%;flex:0 0 45%}.login-content[_ngcontent-%COMP%]   .block-right[_ngcontent-%COMP%]{-ms-flex:0 0 55%;flex:0 0 55%}}@media (min-width:1200px){.login-content[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]{-ms-flex:0 0 52%;flex:0 0 52%}.login-content[_ngcontent-%COMP%]   .block-right[_ngcontent-%COMP%]{-ms-flex:0 0 50%;flex:0 0 50%}}@media (min-width:1580px){.login-content[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]{-ms-flex:0 0 45%;flex:0 0 45%}.login-content[_ngcontent-%COMP%]   .block-right[_ngcontent-%COMP%]{-ms-flex:0 0 55%;flex:0 0 55%}}.login-content[_ngcontent-%COMP%]   .form-area[_ngcontent-%COMP%]{margin:0 auto}.logoVip[_ngcontent-%COMP%]{max-width:110px;margin-bottom:.7142857143rem;height:19px;background:url(https://static.kfc.fr/images/web/kfc-vip.svg?v=22.0) no-repeat}.create-account-banner[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:2.1428571429rem}.create-account-banner[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{-ms-flex:0 0 30%;flex:0 0 30%;text-align:center;text-transform:uppercase;font-family:National2-Bold}.create-account-banner[_ngcontent-%COMP%]   [class^=icon-][_ngcontent-%COMP%]{display:block;margin:0 auto .7142857143rem;width:60px;height:40px}.create-account-banner[_ngcontent-%COMP%]   .icon-offers[_ngcontent-%COMP%]{background-position:-130px -516px}.create-account-banner[_ngcontent-%COMP%]   .icon-discount[_ngcontent-%COMP%]{background-position:-221px -516px}.create-account-banner[_ngcontent-%COMP%]   .icon-faster-checkout[_ngcontent-%COMP%]{background-position:-137px -594px}.communication-list[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}@media (max-width:767px){.communication-list[_ngcontent-%COMP%]{-ms-flex-wrap:wrap;flex-wrap:wrap}.communication-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{-ms-flex:0 0 35%;flex:0 0 35%}}.form-area[_ngcontent-%COMP%]   .justify-content[_ngcontent-%COMP%]{-ms-flex-pack:start!important;justify-content:flex-start!important}@media (min-width:768px){.form-area[_ngcontent-%COMP%]   .justify-content[_ngcontent-%COMP%]{-ms-flex-pack:justify!important;justify-content:space-between!important}}.form-area[_ngcontent-%COMP%]   .register-form[_ngcontent-%COMP%]   .field-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:5px;overflow:hidden}.form-area[_ngcontent-%COMP%]   .register-form[_ngcontent-%COMP%]   .field-row.birth-row[_ngcontent-%COMP%]{gap:5%}.form-area[_ngcontent-%COMP%]   .register-form[_ngcontent-%COMP%]   .field-row[_ngcontent-%COMP%]   .text-error[_ngcontent-%COMP%]{padding:0}.form-area[_ngcontent-%COMP%]   .register-form[_ngcontent-%COMP%]   .field-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{-ms-flex:0 0 47%;flex:0 0 47%;width:47%}.form-area[_ngcontent-%COMP%]   .register-form[_ngcontent-%COMP%]   .field-row[_ngcontent-%COMP%]   mat-form-field.birth-month[_ngcontent-%COMP%]{margin-left:auto}.form-area[_ngcontent-%COMP%]   .register-form[_ngcontent-%COMP%]   .field-row[_ngcontent-%COMP%]   mat-form-field.birth-month[_ngcontent-%COMP%], .form-area[_ngcontent-%COMP%]   .register-form[_ngcontent-%COMP%]   .field-row[_ngcontent-%COMP%]   mat-form-field.birth-year[_ngcontent-%COMP%]{-ms-flex:0 0 30%;flex:0 0 30%;width:30%}.h6-normal[_ngcontent-%COMP%]{font-weight:400!important;font-family:National2Condensed-Regular!important;display:inline-block}.font-15[_ngcontent-%COMP%]{font-size:15px!important}.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0}@media (min-width:768px){.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0}}@media (min-width:1200px){.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0}}@media (min-width:1580px){.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0}}.social-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{position:relative;text-transform:uppercase;letter-spacing:2px}.social-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:before{position:absolute;content:"";background:rgba(0,0,0,.1);height:2px;width:100%;top:calc(50% - 2px)}.social-section[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;display:inline-block;padding:0 1.0714285714rem 0 0;position:relative}#social-connect-space-register[_ngcontent-%COMP%]{text-align:center}@media (min-width:768px){#social-connect-space-register[_ngcontent-%COMP%]{width:550px;margin:0 auto}}@media (min-width:1200px){#social-connect-space-register[_ngcontent-%COMP%]{width:470px;margin:0 auto}}@media (min-width:1580px){#social-connect-space-register[_ngcontent-%COMP%]{width:520px;margin:0 auto}}#social-connect-space-register[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:100%;text-align:center;border-bottom:1px solid #b3b2b2;line-height:.1em;margin:5% 0}@media (min-width:768px){#social-connect-space-register[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:75%;margin:5% 10%}}@media (min-width:1200px){#social-connect-space-register[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:75%;margin:5% 10%}}@media (min-width:1580px){#social-connect-space-register[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{width:75%;margin:5% 10%}}#social-connect-space-register[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px}mat-form-field.mat-form-field[_ngcontent-%COMP%]{font-size:1.12rem;font-family:National2Condensed-Regular!important}mat-label[_ngcontent-%COMP%]{color:#202124}.input-spacer[_ngcontent-%COMP%]{padding-right:20%}@media (max-width:767px){.input-spacer[_ngcontent-%COMP%]{padding-right:5%}}.input-spacer1[_ngcontent-%COMP%]{padding-right:2%}@media (max-width:767px){.input-spacer1[_ngcontent-%COMP%]{padding-right:5%;width:38%}}.birth-txt[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;padding-right:3%}.register-subheader[_ngcontent-%COMP%]{font-size:20px}']}),e})();var De=n("vJX7"),$e=n("ZcHG");const Ve=function(){return["/mon-compte/inscription"]};let qe=(()=>{class e{constructor(e,t,n,o,r,i,a,s){this.authenticationService=e,this.route=t,this.basketService=n,this.commonService=o,this.router=r,this.modalService=i,this.constants=a,this.gtmService=s,this.authenticationService.currentUserValue&&this.router.navigate(["/"])}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(C.Ob(a.a),C.Ob(r.a),C.Ob(g.a),C.Ob(d.a),C.Ob(r.e),C.Ob(s.a),C.Ob(c.a),C.Ob(h.a))},e.\u0275cmp=C.Ib({type:e,selectors:[["app-login"]],decls:7,vars:7,consts:[[1,"container","login-content"],[1,"page-block"],[1,"block-right","order-md-2","appear-right"],[1,"block-left","order-md-1","appear-left","loader-bg","d-none","d-md-block"],[3,"routerLink"],[3,"imgFolder","imgName","imgClassName","imgLazyLoad","altText"]],template:function(e,t){1&e&&(C.Ub(0,"section",0),C.Ub(1,"div",1),C.Ub(2,"div",2),C.Pb(3,"app-login-section"),C.Tb(),C.Ub(4,"div",3),C.Ub(5,"a",4),C.Pb(6,"app-picture",5),C.Tb(),C.Tb(),C.Tb(),C.Tb()),2&e&&(C.Bb(5),C.rc("routerLink",C.uc(6,Ve)),C.Bb(1),C.rc("imgFolder","loyalty")("imgName","login-lg.jpg")("imgClassName","img-fluid")("imgLazyLoad",!0)("altText","signin"))},directives:[$e.a,r.h,x.a],styles:[".account-text{display:block}"]}),e})();var je,Ge,Ke,Je,Xe,He,We,Ze;function Qe(e,t){if(1&e&&(C.Ub(0,"li"),C.Nc(1),C.Tb()),2&e){const e=t.$implicit;C.Bb(1),C.Oc(e)}}function et(e,t){if(1&e&&(C.Sb(0),C.Ub(1,"ul"),C.Lc(2,Qe,2,1,"li",23),C.Tb(),C.Rb()),2&e){const e=C.mc(2);C.Bb(2),C.rc("ngForOf",e.error.errors)}}function tt(e,t){if(1&e&&(C.Ub(0,"ul"),C.Ub(1,"li"),C.Nc(2),C.Tb(),C.Tb()),2&e){const e=C.mc(2);C.Bb(2),C.Oc(e.constants.GENERIC_ERROR)}}function nt(e,t){if(1&e&&(C.Ub(0,"app-message-info",19),C.Sb(1,20),C.Lc(2,et,3,1,"ng-container",21),C.Lc(3,tt,3,1,"ng-template",null,22,C.Mc),C.Rb(),C.Tb()),2&e){const e=C.Bc(4),t=C.mc();C.rc("showError",t.showError)("msgType","error"),C.Bb(2),C.rc("ngIf",t.error&&t.error.errors&&t.error.errors.length>0)("ngIfElse",e)}}function ot(e,t){if(1&e){const e=C.Vb();C.Ub(0,"div"),C.Ub(1,"app-password-strength",24),C.ic("passwordStrength",(function(t){return C.Ec(e),C.mc().passwordValid(t)})),C.Tb(),C.Tb()}if(2&e){const e=C.mc();C.Bb(1),C.rc("passwordToCheck",e.resetPasswordForm.value.password)}}function rt(e,t){1&e&&(C.Ub(0,"div",25),C.Sb(1),C.Yb(2,He),C.Rb(),C.Tb())}function it(e,t){1&e&&(C.Ub(0,"div",25),C.Sb(1),C.Yb(2,We),C.Rb(),C.Tb())}function at(e,t){1&e&&(C.Ub(0,"div",25),C.Sb(1),C.Yb(2,Ze),C.Rb(),C.Tb())}je="\n          R\xE9initialiser mon mot de passe\n        ",Ge="\n          Acc\xE9der \xE0 mon compte\n        ",Ke="Mot de passe",Je="\n          Nouveau mot de passe\n        ",Xe="\n          Confirmer\n        ",He="\n          Mot de passe\n        ",We="\n          Confirmer le nouveau mot de passe\n        ",Ze="\n          Les deux mots de passe doivent \xEAtre identiques\n        ";const st=function(e,t){return{"icon-password":e,"icon-password-slash":t}};let ct=(()=>{class e{constructor(e,t,n,o,r,i,a,s){this.formBuilder=e,this.authenticationService=t,this.activatedRoute=n,this.router=o,this.commonService=r,this.constants=i,this.gtmService=a,this.brazeService=s,this.passwordIsValid=!1,this.passwordStrengthOpen=!1}ngOnDestroy(){this.resetPasswordSubscription&&this.resetPasswordSubscription.unsubscribe()}ngOnInit(){this.showSpinner=!1,this.email=this.activatedRoute.snapshot.queryParamMap.get("email"),this.token=this.activatedRoute.snapshot.queryParamMap.get("code"),this.loadResetForm()}showPassword(e){switch(e){case"password":this.passwordType=!this.passwordType;break;case"confirmPassword":this.confirmPasswordType=!this.confirmPasswordType}}loadResetForm(){this.resetPasswordForm=this.formBuilder.group({email:new i.f(this.email,{validators:[i.y.required]}),token:new i.f(this.token,{validators:[i.y.required]}),password:new i.f("",{validators:this.commonService.passwordValidators()}),confirmPassword:new i.f("",{validators:this.commonService.passwordValidators()})})}passwordValid(e){console.log(e),this.passwordIsValid=e}passwordStrengthShow(){this.passwordStrengthOpen=!0}passwordStrengthClose(){this.passwordStrengthOpen=!1}onSetPassword(){this.resetPasswordForm.valid?(this.showSpinner=!0,this.resetPasswordSubscription=this.authenticationService.resetPasswordRecovery(this.resetPasswordForm.value).subscribe(e=>{this.showSpinner=!1,this.showError=!1,this.brazeService.setPasswordResetInfo(),this.resetPasswordForm.reset(),this.router.navigate(["/mon-compte/connexion"])},e=>{this.showSpinner=!1,this.showError=!0,this.error=e.error})):this.resetPasswordForm.markAllAsTouched()}get password(){return this.resetPasswordForm.get("password")}get confirmPassword(){return this.resetPasswordForm.get("confirmPassword")}}return e.\u0275fac=function(t){return new(t||e)(C.Ob(i.e),C.Ob(a.a),C.Ob(r.a),C.Ob(r.e),C.Ob(d.a),C.Ob(c.a),C.Ob(h.a),C.Ob(p.a))},e.\u0275cmp=C.Ib({type:e,selectors:[["app-reset-password"]],decls:32,vars:22,consts:[[1,"container","page-wrapper"],[1,"reset-password"],[1,"mb-2"],[3,"showError","msgType",4,"ngIf"],[3,"formGroup"],[1,"form-area"],[1,"form-group","input-with-icon"],[4,"ngIf"],["matInput","","required","","formControlName","password","id","password",3,"type","blur","click","focus"],["userPassword",""],["href","javascript:void(0);",3,"click"],[3,"ngClass"],["class","text-error",4,"ngIf"],[1,"form-group","input-with-icon","mb-5"],["for","confirmPassword"],["matInput","","required","","formControlName","confirmPassword","id","confirmPassword",3,"type"],["confirmPassword",""],[3,"btnTag","btnTagType","spinnerVisible","isDisabled","btnClass","btnType","btnClick"],[1,"button-content"],[3,"showError","msgType"],[1,"message-content"],[4,"ngIf","ngIfElse"],["genericError",""],[4,"ngFor","ngForOf"],[3,"passwordToCheck","passwordStrength"],[1,"text-error"]],template:function(e,t){if(1&e&&(C.Ub(0,"section",0),C.Ub(1,"div",1),C.Ub(2,"h1",2),C.Yb(3,je),C.Tb(),C.Ub(4,"p"),C.Yb(5,Ge),C.Tb(),C.Lc(6,nt,5,4,"app-message-info",3),C.Ub(7,"form",4),C.Ub(8,"div",5),C.Ub(9,"div",6),C.Lc(10,ot,2,1,"div",7),C.Ub(11,"mat-form-field"),C.Ub(12,"mat-label"),C.Yb(13,Ke),C.Tb(),C.Ub(14,"input",8,9),C.ic("blur",(function(){return t.passwordStrengthClose()}))("click",(function(){return t.passwordStrengthShow()}))("focus",(function(){return t.passwordStrengthShow()})),C.Tb(),C.Tb(),C.Ub(16,"a",10),C.ic("click",(function(){return t.showPassword("password")})),C.Pb(17,"i",11),C.Tb(),C.Lc(18,rt,3,0,"div",12),C.Tb(),C.Ub(19,"div",13),C.Ub(20,"mat-form-field"),C.Ub(21,"mat-label",14),C.Yb(22,Je),C.Tb(),C.Pb(23,"input",15,16),C.Tb(),C.Ub(25,"a",10),C.ic("click",(function(){return t.showPassword("confirmPassword")})),C.Pb(26,"i",11),C.Tb(),C.Lc(27,it,3,0,"div",12),C.Lc(28,at,3,0,"div",12),C.Tb(),C.Ub(29,"app-button",17),C.ic("btnClick",(function(){return t.onSetPassword()})),C.Sb(30,18),C.Yb(31,Xe),C.Rb(),C.Tb(),C.Tb(),C.Tb(),C.Tb(),C.Tb()),2&e){const e=C.Bc(24);C.Bb(6),C.rc("ngIf",t.showError),C.Bb(1),C.rc("formGroup",t.resetPasswordForm),C.Bb(3),C.rc("ngIf",t.passwordStrengthOpen),C.Bb(4),C.rc("type",t.passwordType?"text":"password"),C.Bb(3),C.rc("ngClass",C.wc(16,st,!t.passwordType,t.passwordType)),C.Bb(1),C.rc("ngIf",t.password&&t.password.touched&&(null==t.password.errors?null:t.password.errors.required)),C.Bb(5),C.rc("type",t.confirmPasswordType?"text":"password"),C.Bb(3),C.rc("ngClass",C.wc(19,st,!t.confirmPasswordType,t.confirmPasswordType)),C.Bb(1),C.rc("ngIf",e&&e.touched&&(null==e.errors?null:e.errors.required)),C.Bb(1),C.rc("ngIf",e&&e.touched&&!(null!=e.errors&&e.errors.required)||t.resetPasswordForm.value.confirmPassword!==t.resetPasswordForm.value.password),C.Bb(1),C.rc("btnTag","button")("btnTagType","submit")("spinnerVisible",t.showSpinner)("isDisabled",t.showSpinner)("btnClass","btn btn-block")("btnType","raised")}},directives:[o.l,i.z,i.q,i.i,ee.c,ee.f,te.b,i.b,i.x,i.p,i.g,o.j,S.a,ie.a,o.k,ae.a],styles:[".login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0 1.0714285714rem}@media (min-width:768px){.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0 2.1428571429rem}}@media (min-width:1200px){.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0 2.8571428571rem}}@media (min-width:1580px){.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0 1.0714285714rem}}.login-content[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]{padding:.7142857143rem 1.0714285714rem}@media (min-width:768px){.login-content[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]{padding:2.1428571429rem}}@media (min-width:1200px){.login-content[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]{padding:.7142857143rem 2.8571428571rem}}@media (min-width:1580px){.login-content[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]{padding:4.2857142857rem 1.0714285714rem}}@media (max-width:991px){.login-content[_ngcontent-%COMP%]{padding:0}}@media (min-width:992px){.login-content[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]{-ms-flex:0 0 45%;flex:0 0 45%}.login-content[_ngcontent-%COMP%]   .block-right[_ngcontent-%COMP%]{-ms-flex:0 0 55%;flex:0 0 55%}}@media (min-width:1200px){.login-content[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]{-ms-flex:0 0 52%;flex:0 0 52%}.login-content[_ngcontent-%COMP%]   .block-right[_ngcontent-%COMP%]{-ms-flex:0 0 50%;flex:0 0 50%}}@media (min-width:1580px){.login-content[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]{-ms-flex:0 0 45%;flex:0 0 45%}.login-content[_ngcontent-%COMP%]   .block-right[_ngcontent-%COMP%]{-ms-flex:0 0 55%;flex:0 0 55%}}.login-content[_ngcontent-%COMP%]   .form-area[_ngcontent-%COMP%]{margin:0 auto}@media (min-width:768px){.reset-password[_ngcontent-%COMP%]{width:550px;margin:0 auto}.reset-password[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .reset-password[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}}"]}),e})();var lt=n("gJie"),dt=n("1cRO"),bt=n("dNgK");function mt(e,t){1&e&&(C.Ub(0,"div",16),C.Sb(1),C.Nc(2,"Le code est incorrect"),C.Rb(),C.Tb())}function gt(e,t){1&e&&(C.Ub(0,"div",16),C.Sb(1),C.Nc(2,"Veuillez saisir le code"),C.Rb(),C.Tb())}const pt=[{path:"",component:De.a,children:[{path:"inscription",component:Ye,pathMatch:"full",canActivate:[lt.a]},{path:"connexion",component:qe,pathMatch:"full"},{path:"reset-password",component:ct},{path:"two-step-verification",component:(()=>{class e{constructor(e,t,n,o,r,i,a,s,c){this.authService=e,this.route=t,this.router=n,this.brazeService=o,this.gtmService=r,this.loggerService=i,this.constants=a,this.authenticationService=s,this.snackBar=c,this.validateControl=e=>this.twoStepForm.get(e).invalid&&this.twoStepForm.get(e).touched,this.hasError=(e,t)=>this.twoStepForm.get(e).hasError(t),this.loginUser=e=>{if(this.showError=!1,this.twoStepForm.valid){const t=Object.assign({},e);let n={email:this.email,provider:this.provider,token:t.twoFactorCode};this.isIncorrectCode=!1,this.authService.twoStepLogin(n).pipe(Object(l.a)()).subscribe(e=>{this.loggerService.logInfo("User Login Successfull for User email - "+e.user.email).subscribe(),this.gtmService.sendLoginSuccessStatus(),e.user&&(this.gtmService.signInFinish(e.user),this.brazeService.setLoginInfo(e.user.email)),this.router.url.indexOf("paiement")>-1?this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate(["/paiement"])}):this.router.navigate(["/loyalty"])},e=>{"Invalid Token Verification"==e.error&&(this.isIncorrectCode=!0),this.showSpinner=!1,this.showError=!0,this.errorMessage=e.error,this.loggerService.logInfo(`User Login Failed for User email - ${this.email} , error ${JSON.stringify(e)}`).subscribe(),this.errorMessage||this.gtmService.embeddedErrormsg(this.constants.GENERIC_ERROR)})}else this.isEmptyCode=!0}}ngOnInit(){this.twoStepForm=new i.h({twoFactorCode:new i.f("",[i.y.required])}),this.provider=this.route.snapshot.queryParams.provider,this.email=this.route.snapshot.queryParams.email,this.returnUrl=this.route.snapshot.queryParams.returnUrl}resendCode(){this.authenticationService.resendCode(this.email).pipe(Object(l.a)()).subscribe(e=>{e.is2StepVerificationRequired?this.openSnackBar("Please check your mail!",!0):this.openSnackBar("Something went wrong!",!1)},e=>{this.showSpinner=!1,this.showError=!0,this.error=e.error,this.error||this.gtmService.embeddedErrormsg(this.constants.GENERIC_ERROR),1===this.error.errors.length&&(this.gtmService.sendLoginFailureStatus(this.error.errors[0]),this.gtmService.embeddedErrormsg(this.error.errors[0]))})}onKey(e){this.isIncorrectCode=!1,this.isEmptyCode=!1}openSnackBar(e,t){setTimeout(()=>{t?(this.snackBar.open(e,"",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["coupon-snackbar-success"]}),this.snackBar._openedSnackBarRef.onAction().subscribe(()=>{this.router.navigate(["/mon-panier"])})):this.snackBar.open(e,"",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["coupon-snackbar-failed"]})},500)}}return e.\u0275fac=function(t){return new(t||e)(C.Ob(a.a),C.Ob(r.a),C.Ob(r.e),C.Ob(p.a),C.Ob(h.a),C.Ob(dt.a),C.Ob(c.a),C.Ob(a.a),C.Ob(bt.a))},e.\u0275cmp=C.Ib({type:e,selectors:[["app-two-step-verification"]],decls:32,vars:15,consts:[[1,"container","page-wrapper","text-center","pb-2"],[1,"small-content"],[3,"imgFolder","imgClassName","imgLazyLoad","imgName","altText"],[2,"text-transform","none","font-family","National2Condensed-Regular"],[1,"content-desc"],[1,"code-details"],["autocomplete","off",2,"text-align","-webkit-center !important",3,"formGroup","ngSubmit"],[1,"login-section","form-area"],[1,"form-group","input-with-icon","mb-5"],["matInput","","type","tel","formControlName","twoFactorCode","id","twoFactorCode",3,"keyup"],["twoFactorCode",""],["class","text-error pb-2 code-error",4,"ngIf"],[1,"resentLink"],["href","javascript:void(0)",1,"link-underline",3,"click"],[3,"btnTag","btnTagType","spinnerVisible","isDisabled","btnClass","btnType"],[1,"button-content"],[1,"text-error","pb-2","code-error"]],template:function(e,t){1&e&&(C.Ub(0,"section",0),C.Ub(1,"div",1),C.Ub(2,"div"),C.Pb(3,"app-picture",2),C.Tb(),C.Ub(4,"h1",3),C.Pb(5,"br"),C.Nc(6," Code de s\xe9curit\xe9 envoy\xe9 "),C.Tb(),C.Ub(7,"div",4),C.Ub(8,"p"),C.Nc(9," Pour v\xe9rifier votre identit\xe9, un code est demand\xe9 \xe0 la connexion pour des raisons de s\xe9curit\xe9. "),C.Tb(),C.Ub(10,"p"),C.Nc(11," Veuillez entrer le code de s\xe9curit\xe9 que vous avez re\xe7u \xe0 l\u2019adresse mail "),C.Ub(12,"b"),C.Nc(13),C.Tb(),C.Nc(14,". "),C.Tb(),C.Tb(),C.Ub(15,"div",5),C.Ub(16,"form",6),C.ic("ngSubmit",(function(){return t.loginUser(t.twoStepForm.value)})),C.Ub(17,"div",7),C.Ub(18,"div",8),C.Ub(19,"mat-form-field"),C.Ub(20,"mat-label"),C.Nc(21,"Code"),C.Tb(),C.Ub(22,"input",9,10),C.ic("keyup",(function(e){return t.onKey(e)})),C.Tb(),C.Tb(),C.Tb(),C.Lc(24,mt,3,0,"div",11),C.Lc(25,gt,3,0,"div",11),C.Ub(26,"div",12),C.Ub(27,"a",13),C.ic("click",(function(){return t.resendCode()})),C.Nc(28,"Me renvoyer le code"),C.Tb(),C.Tb(),C.Ub(29,"app-button",14),C.Sb(30,15),C.Nc(31," VERIFIER MON CODE "),C.Rb(),C.Tb(),C.Tb(),C.Tb(),C.Tb(),C.Tb(),C.Tb()),2&e&&(C.Bb(3),C.rc("imgFolder","login")("imgClassName","img-full-width")("imgLazyLoad",!0)("imgName","mail.svg")("altText","Mail"),C.Bb(10),C.Oc(t.email),C.Bb(3),C.rc("formGroup",t.twoStepForm),C.Bb(8),C.rc("ngIf",t.isIncorrectCode),C.Bb(1),C.rc("ngIf",t.isEmptyCode),C.Bb(4),C.rc("btnTag","button")("btnTagType","submit")("spinnerVisible",t.showSpinner)("isDisabled",t.showSpinner)("btnClass","btn btn-block")("btnType","raised"))},directives:[x.a,i.z,i.q,i.i,ee.c,ee.f,te.b,i.b,i.p,i.g,o.l,S.a],styles:['.breadcrumb[_ngcontent-%COMP%]{font-size:1.1428571429rem;margin-bottom:1.7857142857rem}.breadcrumb[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;color:#78838c}.breadcrumb[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:">";display:inline-block;margin:0 .2857142857rem;font-family:National2-Bold;font-size:1rem}.breadcrumb[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#78838c}.breadcrumb[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.breadcrumb[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child:after{display:none}.main-banner-static[_ngcontent-%COMP%]{background:url(https://static.kfc.fr/images/static-page/bg-concrete.jpg) no-repeat;background-size:cover;text-align:center;padding-top:1.0714285714rem}.main-banner-static[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{text-align:left;margin-bottom:.3571428571rem}.main-banner-static[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:0}.main-banner-static[_ngcontent-%COMP%]   app-picture[_ngcontent-%COMP%]{position:relative;bottom:-1.5rem}@media (min-width:992px){.small-content[_ngcontent-%COMP%]{width:700px;margin:0 auto}}.display-block-item[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-wrap:wrap;flex-wrap:wrap}.display-block-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{box-shadow:0 4px 7px rgba(0,0,0,.1),0 10px 25px rgba(0,0,0,.1);border-radius:10px;padding:.7142857143rem;display:block;font-family:National2-Bold;font-size:1.2857142857rem;margin:0 1.7857142857rem 1.7857142857rem;-ms-flex:0 0 80%;flex:0 0 80%}.display-block-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   app-picture[_ngcontent-%COMP%]{margin-bottom:.7142857143rem;display:block}.display-block-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e4002b}.display-block-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   [class^=icon-][_ngcontent-%COMP%]{display:block;margin:0 auto .7142857143rem}@media (min-width:768px){.display-block-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{-ms-flex:0 0 30%;flex:0 0 30%}}@media (min-width:1200px){.display-block-item[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{-ms-flex:0 0 22%;flex:0 0 22%;margin-bottom:3.5714285714rem}}.seo-container[_ngcontent-%COMP%]{background:url(https://static.kfc.fr/images/static-page/bg-seo.jpg?v=22.0) no-repeat top;background-size:cover;padding:1.7857142857rem 1.0714285714rem}.seo-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1428571429rem;color:#1b1b1b}.kfc-static-logo[_ngcontent-%COMP%]{background:url(https://static.kfc.fr/images/static-page/kfc-static-logo.png?v=22.0) no-repeat;width:165px;height:32px;margin:0 auto 1.4285714286rem}.red-block-section[_ngcontent-%COMP%]{background:#e4002b;color:#fff;padding:2.1428571429rem 1.0714285714rem}@media (min-width:768px){.red-block-section[_ngcontent-%COMP%]{padding:5rem 1.0714285714rem}}.black-block-section[_ngcontent-%COMP%]{background:#202124;color:#fff;padding:2.1428571429rem 1.0714285714rem}@media (min-width:768px){.black-block-section[_ngcontent-%COMP%]{padding:5rem 1.0714285714rem}}.video-section[_ngcontent-%COMP%]{margin-bottom:1.7857142857rem;padding:2.1428571429rem 0;background:#f8f7f5;position:relative}.video-section[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{max-width:100%}.video-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;z-index:2;width:150px;height:150px;margin:-75px 0 0 -75px;border-radius:50%;background:hsla(0,0%,100%,.5)}.video-section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;left:8px;top:38px;width:0;height:0;border-top:40px solid rgba(0,0,0,0);border-bottom:40px solid rgba(0,0,0,0);display:inline-block;border-left:40px solid #fff}.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0 1.0714285714rem}@media (min-width:768px){.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0 2.1428571429rem}}@media (min-width:1200px){.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0 2.8571428571rem}}@media (min-width:1580px){.login-content[_ngcontent-%COMP%]   .social-section[_ngcontent-%COMP%]{padding:0 1.0714285714rem}}.login-content[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]{padding:.7142857143rem 1.0714285714rem}@media (min-width:768px){.login-content[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]{padding:2.1428571429rem}}@media (min-width:1200px){.login-content[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]{padding:.7142857143rem 2.8571428571rem}}@media (min-width:1580px){.login-content[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]{padding:4.2857142857rem 1.0714285714rem}}@media (max-width:991px){.login-content[_ngcontent-%COMP%]{padding:0}}@media (min-width:992px){.login-content[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]{-ms-flex:0 0 45%;flex:0 0 45%}.login-content[_ngcontent-%COMP%]   .block-right[_ngcontent-%COMP%]{-ms-flex:0 0 55%;flex:0 0 55%}}@media (min-width:1200px){.login-content[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]{-ms-flex:0 0 52%;flex:0 0 52%}.login-content[_ngcontent-%COMP%]   .block-right[_ngcontent-%COMP%]{-ms-flex:0 0 50%;flex:0 0 50%}}@media (min-width:1580px){.login-content[_ngcontent-%COMP%]   .block-left[_ngcontent-%COMP%]{-ms-flex:0 0 45%;flex:0 0 45%}.login-content[_ngcontent-%COMP%]   .block-right[_ngcontent-%COMP%]{-ms-flex:0 0 55%;flex:0 0 55%}}.login-content[_ngcontent-%COMP%]   .form-area[_ngcontent-%COMP%]{margin:0 auto}.twostep-verification[_ngcontent-%COMP%]   form.ng-pristine.ng-invalid.ng-touched.new[_ngcontent-%COMP%]{width:100%;text-align:-webkit-center!important}@media (min-width:768px){.twostep-verification[_ngcontent-%COMP%]{width:541px!important;margin:0 auto}.twostep-verification[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .twostep-verification[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}}.code-error[_ngcontent-%COMP%]{padding-bottom:1rem;font-size:larger}  .cdk-overlay-container .mat-snack-bar-container{background:#000!important}  .cdk-overlay-container   .mat-simple-snackbar{color:#fff!important}.resentLink[_ngcontent-%COMP%]{text-align:right;margin-bottom:1.78571429rem}']}),e})(),pathMatch:"full"}]}];let ht=(()=>{class e{}return e.\u0275mod=C.Mb({type:e}),e.\u0275inj=C.Lb({factory:function(t){return new(t||e)},imports:[[r.i.forChild(pt)],r.i]}),e})();var ut=n("PCNd"),ft=n("W/RB"),Ct=n("KzTZ"),Ot=n("L4SR"),wt=n("rP0y"),Pt=n("Vpbp");let vt=(()=>{class e{constructor(e,t){this.router=t,this.loadMaponCookieConsent=!1,null==e&&(this.loadMaponCookieConsent=!0)}}return e.\u0275mod=C.Mb({type:e}),e.\u0275inj=C.Lb({factory:function(t){return new(t||e)(C.ec(Pt.a,8),C.ec(r.e))},imports:[[o.b,wt.a,ht,i.k,i.w,ut.a,ft.a,Ct.a,Ot.a,Pt.a]]}),e})()}}]);